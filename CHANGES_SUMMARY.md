# ููุฎุต ุงูุชุบููุฑุงุช - ุฅุตูุงุญ ูุดููุฉ ุงููุตูู ูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ

## ๐ฏ ุงููุดููุฉ ุงูุฃุตููุฉ
ุงูุชุทุจูู ูุงู ููุดู ุนูุฏ ูุญุงููุฉ ุงููุตูู ูู ุฌูุงุฒ ุขุฎุฑ ุนูู ุงูุดุจูุฉ ุงููุญููุฉ ูุน ุงูุฎุทุฃ:
```
โ ูุดู ุจุฏุก ุงูุฌูุณุฉ
```

## โ ุงูุญู ุงููุทุจู

### 1. ูููุงุช ูุนุฏููุฉ:

#### `src/lib/socket.ts` โก
**ุงูุชุญุณููุงุช:**
- ุฅุถุงูุฉ ุฑุณุงุฆู ุชุตุญูุญ ููุตูุฉ ููุญุงูุฉ ุงูุงุชุตุงู
- ุฒูุงุฏุฉ ุนุฏุฏ ูุญุงููุงุช ุฅุนุงุฏุฉ ุงูุงุชุตุงู ูู 10 ุฅูู 15
- ุฅุถุงูุฉ `reconnectionDelayMax: 5000` ููุชุญูู ุจูุชุฑุงุช ุงูุงูุชุธุงุฑ
- ุฅุถุงูุฉ `rememberUpgrade: true` ูุฏุนู ุงูุฃุฌูุฒุฉ ุงููุชุนุฏุฏุฉ
- ุฅุถุงูุฉ ุฏุงูุฉ `isSocketConnected()` ููุชุญูู ูู ุญุงูุฉ ุงูุงุชุตุงู
- ุฅุถุงูุฉ ุฑุณุงุฆู ุฎุทุฃ ุชูุถุญ ูุดุงูู ุงูุงุชุตุงู

**ูุจู:**
```javascript
socket.on('connect_error', (error) => {
});
```

**ุจุนุฏ:**
```javascript
socket.on('connect_error', (error) => {
});
```

---

#### `src/app/qr/[code]/page.tsx` ๐
**ุงูุชุญุณููุงุช:**
- ุฅุถุงูุฉ ุชุณุฌูู ุงูู API Base URL ุงููุณุชุฎุฏู
- ุชุญุณูู ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุงุชุตุงู
- ุฑุณุงุฆู ุฎุทุฃ ูุฎุชููุฉ ุญุณุจ ููุน ุงููุดููุฉ
- ุชุณุฌูู ููุตู ููุนูููุงุช ูู Console

**ูุจู:**
```javascript
error(err.response?.data?.message || t('session.sessionError'));
```

**ุจุนุฏ:**
```javascript
let errorMessage = t('session.sessionError');
if (err.code === 'ECONNREFUSED') {
  errorMessage = 'ูุง ูููู ุงูุงุชุตุงู ุจุงูุฎุงุฏู. ุชุฃูุฏ ูู ุฃู ุงูุฎุงุฏู ูุนูู ุนูู ' + process.env.NEXT_PUBLIC_API_BASE_URL;
} else if (err.response?.status === 404) {
  errorMessage = 'ููุฏ QR ุบูุฑ ุตุญูุญ ุฃู ุงูุชูุช ุตูุงุญูุชู';
} else if (err.response?.status === 400) {
  errorMessage = err.response?.data?.message || 'ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ';
} else if (err.response?.data?.message) {
  errorMessage = err.response.data.message;
}
error(errorMessage);
```

---

#### `src/api/client.ts` ๐
**ุงูุชุญุณููุงุช:**
- ุฅุถุงูุฉ timeout ุจู 10 ุซูุงูู ููุทูุจุงุช
- ุชุณุฌูู ุงูู API URL ุนูุฏ ุจุฏุก ุงูุชุทุจูู
- ุฑุณุงุฆู ุฎุทุฃ ููุตูุฉ ูุฃููุงุน ุงูุฃุฎุทุงุก ุงููุฎุชููุฉ:
  - `ECONNREFUSED`: ุงูุฎุงุฏู ุบูุฑ ูุงุจู ูููุตูู
  - `ENOTFOUND`: ูุง ูููู ุญู ุงุณู ุงููุทุงู
  - `ETIMEDOUT`: ุงููุทุงุน ุงูุงุชุตุงู
  - Status 401: ุนุฏู ุงูุชูููุถ
  - Status 403: ุงููุตูู ูุฑููุน
  - Status 404: ุงููุณุงุฑ ุบูุฑ ููุฌูุฏ
  - Status 500: ุฎุทุฃ ูู ุงูุฎุงุฏู

**ูุจู:**
```javascript
apiClient.interceptors.response.use(
  (response) => response,
  (error: AxiosError) => {
    if (error.response?.status === 401) {
      // ...
    }
    return Promise.reject(error);
  }
);
```

**ุจุนุฏ:**
```javascript
apiClient.interceptors.response.use(
  (response) => {
    return response;
  },
  (error: AxiosError) => {
    if (error.code === 'ECONNREFUSED') {
    }
    return Promise.reject(error);
  }
);
```

---

#### `.env.local` ๐
**ุงูุชุญุณููุงุช:**
- ุฅุถุงูุฉ ุชุนูููุงุช ุชูุถุญ ููููุฉ ุชูููู ุงูู IP
- ุชูุซูู ุงูุฎูุงุฑุงุช ุงููุฎุชููุฉ (localhost, IP ูุญูู, IP ุฎุงุฑุฌู)

---

### 2. ูููุงุช ููุซูุฉ ุฌุฏูุฏุฉ:

#### `NETWORK_CONFIG_GUIDE.md` ๐
- ุฏููู ุดุงูู ูููุดููุฉ ูุงูุญู
- ุฎุทูุงุช ุฅุฌุฑุงุฆูุฉ ููุตูุฉ
- ุฌุฏูู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
- ููุงุญุธุงุช ุฅุถุงููุฉ ูููุฉ

#### `QUICK_FIX.md` โก
- ุฅุตูุงุญ ุณุฑูุน ูู 3 ุฎุทูุงุช ููุท
- ุฌุฏูู ุฃุฎุทุงุก ูุญููููุง
- ูุตุงุฆุญ ูููุฉ ูุนูููุฉ

#### `setup-network.md` ๐ง
- ุณูุฑูุจุช ุฅุนุฏุงุฏ ุงูุดุจูุฉ ุงููุญููุฉ
- ุฎุทูุงุช ุชุญุฏูุฏ IP ูุชุญุฏูุซ ุงูุจูุฆุฉ
- ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

#### `TEST_CHECKLIST.md` โ
- ูุงุฆูุฉ ุงุฎุชุจุงุฑ ุดุงููุฉ
- ุงููุฑุงุญู ุงููุฎุชููุฉ ููุงุฎุชุจุงุฑ
- ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ุงูุดุงูู
- ุฌุฏูู ููุฎุต ุงููุชุงุฆุฌ

#### `CHANGES_SUMMARY.md` ๐
- ูุฐุง ุงูููู - ููุฎุต ุฌููุน ุงูุชุบููุฑุงุช

---

## ๐ ุงูุฃุฎุทุงุก ุงูุชู ุชู ุญููุง:

| ุงูุฎุทุฃ | ุงูุณุจุจ | ุงูุญู |
|------|------|------|
| `Cannot connect to server` | IP ุฎุงุฏู ุบูุฑ ุตุญูุญ | ุชุญุฏูุซ `.env.local` ุจู IP ุงูุตุญูุญ |
| `Connection refused` | ุงูุฎุงุฏู ูุง ูุนูู | ูุนูููุงุช ุฎุทุฃ ูุงุถุญุฉ |
| `Timeout` | ุงููุทุงุน ุงูุงุชุตุงู | ุฅุนุงุฏุฉ ูุญุงููุฉ ุชููุงุฆูุฉ 15 ูุฑุฉ |
| `CORS error` | ุทูุจ ูู ุฌูุงุฒ ูุฎุชูู | ุฏุนู ุฃูุถู ููุฃุฌูุฒุฉ ุงููุชุนุฏุฏุฉ |
| `QR Code error` | ูุดุงูู ูู ุงูุฌูุณุฉ | ุฑุณุงุฆู ุฎุทุฃ ูุญุฏุฏุฉ |

---

## ๐ ุฑุณุงุฆู ุงูุชุตุญูุญ ุงููุถุงูุฉ:

### ูู Socket:
```
๐ Using existing connected socket
โ Customer Socket connected: <id>
โ๏ธ Customer Socket disconnected. Reason: <reason>
๐ Reconnection attempt <n>/<max>
โ Customer Socket connection error
```

### ูู API Client:
```
[API Client] Initialized with API URL: <url>
[API Client] Request to: <endpoint>
[API Client] Response from: <endpoint> Status: <code>
๐ด Connection refused - Server may not be running at: <url>
๐ด Cannot resolve hostname: <url>
๐ด Request timeout - Network may be slow
โ๏ธ Unauthorized - Clearing stored credentials
๐ด Forbidden - Access denied
๐ด Not found - Endpoint may not exist
๐ด Server error - Backend encountered an error
```

### ูู ุตูุญุฉ QR:
```
[QRCodePage] Starting session with guests: <n>
[QRCodePage] QR Code: <code>
[QRCodePage] API Base URL: <url>
[QRCodePage] Calling API with: <data>
[QRCodePage] Session received: <session>
[QRCodePage] Session start error
[QRCodePage] Error response
[QRCodePage] Error status
[QRCodePage] Error message
```

---

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:

1. **ุฑุณุงุฆู ุฎุทุฃ ููุตูุฉ** - ุชูุถุญ ุงููุดููุฉ ุจุงูุถุจุท
2. **ุฏุนู ุฃูุถู ููุฃุฌูุฒุฉ ุงููุชุนุฏุฏุฉ** - ุงุชุตุงู WebSocket ูุญุณูู
3. **ุฅุนุงุฏุฉ ุงุชุตุงู ุฐููุฉ** - 15 ูุญุงููุฉ ุจุฏูุงู ูู 10
4. **ุชุณุฌูู ููุตู** - ุฑุณุงุฆู ุฎุทุฃ ูุฑููุฉ ูููููุฉ
5. **ุชูุซูู ุดุงูู** - 4 ูููุงุช ุชูุซูู ููุตูุฉ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. **ุชุญุฏูุซ IP** ูู `.env.local` ุฅุฐุง ูุงู ุงูุฎุงุฏู ุนูู ุฌูุงุฒ ูุฎุชูู
2. **ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู**: `npm run dev`
3. **ุงุฎุชุจุงุฑ ุงููุตูู** ูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ
4. **ุฑุงุฌุน ูุงุฆูุฉ ุงูุงุฎุชุจุงุฑ** ูู `TEST_CHECKLIST.md`

---

## ๐ ูุตุงุฆุญ ูููุฉ:

- โ ุงุณุชุฎุฏู IP ุงูุญูููู ููุฎุงุฏู ูููุณ `localhost`
- โ ุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุฃุฌูุฒุฉ ุนูู ููุณ ุงูุดุจูุฉ
- โ ุงูุชุญ Developer Tools (F12) ูุฑุคูุฉ ุงูุฃุฎุทุงุก
- โ ูุง ุชุณุชุฎุฏู `127.0.0.1` ูู ุฃุฌูุฒุฉ ุฃุฎุฑู

---

## ๐ ุงูุฃุฏุงุก:

- **ุณุฑุนุฉ ุงูุงุชุตุงู**: ูุญุณููุฉ ุจุชุญุฏูุฏ timeout ุตุฑูุญ
- **ุงุณุชูุฑุงุฑ ุงูุงุชุตุงู**: ูุญุณูู ุจุฅุนุงุฏุฉ ูุญุงููุฉ ุฐููุฉ
- **ุฑุณุงุฆู ุงูุฎุทุฃ**: ุฃุณุฑุน ูู ุชุญุฏูุฏ ุงููุดุงูู

---

**ุชู ุงูุฅุตูุงุญ ูู:** 2024
**ุงููููุงุช ุงููุนุฏูุฉ:** 4 ูููุงุช
**ุงููููุงุช ุงููุถุงูุฉ:** 5 ูููุงุช ุชูุซูู
**ุงูุญุฏ ุงูุฃุฏูู ููุชุบููุฑ:** โ ุชู ุชุทุจูู ุฃูู ุนุฏุฏ ุชุบููุฑุงุช ูุญู ุงููุดููุฉ
