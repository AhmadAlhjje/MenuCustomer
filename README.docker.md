# ๐ณ Menu Customer - Docker Deployment

ุชุทุจูู Menu Customer ููุนููุงุก - ูุณุฎุฉ Docker ูููุดุฑ ุนูู ุงูุณูุฑูุฑ

## ๐ฆ ุงููููุงุช ุงููุชุถููุฉ

```
MenuCustomer/
โโโ Dockerfile                  # ููู ุจูุงุก ุตูุฑุฉ Docker
โโโ docker-compose.yml          # ููู ุชูุณูู ุงูุฎุฏูุงุช
โโโ .dockerignore              # ูููุงุช ูุณุชุซูุงุฉ ูู Build
โโโ .env.production            # ูุชุบูุฑุงุช ุงูุจูุฆุฉ ููุฅูุชุงุฌ
โโโ deploy.sh                  # ุณูุฑูุจุช ุงููุดุฑ ุงูุชููุงุฆู
โโโ DEPLOYMENT_GUIDE.md        # ุฏููู ุงููุดุฑ ุงููุงูู
โโโ DOCKER_QUICKSTART.md       # ุฏููู ุงูุจุฏุก ุงูุณุฑูุน
```

## โก ุงูุจุฏุก ุงูุณุฑูุน

### ุงูุทุฑููุฉ 1: ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช ุงูุชููุงุฆู

```bash
# ุงุฌุนู ุงูุณูุฑูุจุช ูุงุจูุงู ููุชูููุฐ
chmod +x deploy.sh

# ุดุบู ุงูุณูุฑูุจุช
./deploy.sh deploy
```

### ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู Docker Compose ูุจุงุดุฑุฉ

```bash
# ุจูุงุก ูุชุดุบูู
docker-compose up -d --build

# ุงูุชุญูู ูู ุงูุญุงูุฉ
docker-compose ps

# ุนุฑุถ ุงูุณุฌูุงุช
docker-compose logs -f
```

## ๐ง ุงูุฅุนุฏุงุฏุงุช

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุฃุณุงุณูุฉ

| ุงููุชุบูุฑ | ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ | ุงููุตู |
|---------|-------------------|-------|
| `NEXT_PUBLIC_API_BASE_URL` | `http://217.76.53.136:3000` | ุนููุงู API ุงูุฎุงุฏู |
| `NEXT_PUBLIC_API_URL` | `http://217.76.53.136:3000` | ุนููุงู API ุงูุจุฏูู |
| `PORT` | `4002` | ุงูุจูุฑุช ุงูุฐู ูุนูู ุนููู ุงูุชุทุจูู |
| `NODE_ENV` | `production` | ุจูุฆุฉ ุงูุชุดุบูู |

### ุชุฎุตูุต ุงูุฅุนุฏุงุฏุงุช

1. **ุชุบููุฑ ุนููุงู API:**
   - ุนุฏู ููู `.env.production`
   - ุฃู ุนุฏู `docker-compose.yml` ูู ูุณู `environment`

2. **ุชุบููุฑ ุงูุจูุฑุช:**
   - ุนุฏู ููู `docker-compose.yml`
   - ุบูุฑ `"4002:4002"` ุฅูู `"DESIRED_PORT:4002"`

## ๐ ุงููุชุทูุจุงุช

- Docker Engine 20.10+
- Docker Compose 1.29+
- 512MB RAM ุนูู ุงูุฃูู
- 1GB ูุณุงุญุฉ ุชุฎุฒูู

## ๐๏ธ ุจููุฉ ุงูู Dockerfile

```
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Stage 1: deps      โ  โ ุชุซุจูุช Dependencies
โโโโโโโโโโโโโโโโโโโโโโโ
          โ
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Stage 2: builder   โ  โ ุจูุงุก ุงูุชุทุจูู
โโโโโโโโโโโโโโโโโโโโโโโ
          โ
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Stage 3: runner    โ  โ ุชุดุบูู ุงูุชุทุจูู (ุตูุฑุฉ ุฎูููุฉ)
โโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ุฃูุงูุฑ ุงูุฅุฏุงุฑุฉ

### ุงููุดุฑ ูุงูุชุญุฏูุซ

```bash
# ูุดุฑ ุฌุฏูุฏ
./deploy.sh deploy

# ุชุญุฏูุซ ูุฅุนุงุฏุฉ ูุดุฑ
./deploy.sh update

# ุฅููุงู ุงูุชุทุจูู
./deploy.sh stop

# ุฅุนุงุฏุฉ ุชุดุบูู
./deploy.sh restart
```

### ุงููุฑุงูุจุฉ

```bash
# ุนุฑุถ ุงูุณุฌูุงุช ุงููุจุงุดุฑุฉ
./deploy.sh logs

# ุนุฑุถ ุญุงูุฉ ุงูุฎุฏูุงุช
./deploy.sh status

# ูุญุต ุตุญุฉ Container
docker inspect menu-customer-app | grep Health -A 5
```

### ุงูุตูุงูุฉ

```bash
# ุชูุธูู ุงูุตูุฑ ุงููุฏููุฉ
./deploy.sh cleanup

# ุงูุฑุฌูุน ูููุณุฎุฉ ุงูุณุงุจูุฉ
./deploy.sh rollback
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### Container ูุง ูุจุฏุฃ

```bash
# 1. ุชุญูู ูู ุงูุณุฌูุงุช
docker-compose logs

# 2. ุชุญูู ูู Build
docker-compose build --no-cache

# 3. ุชุญูู ูู ุงูููุงุฑุฏ
docker stats
```

### ูุง ูููู ุงููุตูู ููุชุทุจูู

```bash
# 1. ุชุญูู ูู ุงูุจูุฑุช
sudo netstat -tulpn | grep 4002

# 2. ุชุญูู ูู ุงูุฌุฏุงุฑ ุงููุงุฑู
sudo ufw allow 4002/tcp

# 3. ุชุญูู ูู Container
docker-compose exec menu-customer-frontend wget -O- http://localhost:4002
```

### ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูู Backend

```bash
# 1. ุชุญูู ูู ุนููุงู API
docker-compose exec menu-customer-frontend env | grep API

# 2. ุงุฎุชุจุฑ ุงูุงุชุตุงู
docker-compose exec menu-customer-frontend ping -c 3 217.76.53.136

# 3. ุงุฎุชุจุฑ API
curl http://217.76.53.136:3000/api/health
```

## ๐ ุงูุฃุฏุงุก ูุงูููุงุฑุฏ

### ุงุณุชููุงู ุงูููุงุฑุฏ ุงููุชููุน

| ุงูููุฑุฏ | ุงูุงุณุชููุงู |
|--------|-----------|
| RAM | ~300-500 MB |
| CPU | ~5-10% |
| Disk | ~200-300 MB |

### ุชุญุณูู ุงูุฃุฏุงุก

1. **ุชุญุฏูุฏ ููุงุฑุฏ Container:**
   ```yaml
   deploy:
     resources:
       limits:
         cpus: '1'
         memory: 512M
   ```

2. **ุงุณุชุฎุฏุงู Build Cache:**
   ```bash
   docker-compose build
   # ุจุฏูู --no-cache ููุจูุงุก ุงูุฃุณุฑุน
   ```

## ๐ ุงูุฃูุงู

### ุฃูุถู ุงูููุงุฑุณุงุช ุงููุทุจูุฉ

โ Multi-stage build (ุตูุฑ ุฃุตุบุฑ ูุฃูุซุฑ ุฃูุงูุงู)
โ Non-root user (ุชุดุบูู ุจุตูุงุญูุงุช ูุญุฏูุฏุฉ)
โ Health checks (ูุฑุงูุจุฉ ุงูุตุญุฉ)
โ Resource limits (ุชุญุฏูุฏ ุงูููุงุฑุฏ)
โ Minimal base image (Alpine Linux)

### ุชูุตูุงุช ุฅุถุงููุฉ

```bash
# 1. ุงุณุชุฎุฏู ุฌุฏุงุฑ ุญูุงูุฉ
sudo ufw enable
sudo ufw allow 4002/tcp

# 2. ุงุณุชุฎุฏู HTTPS ูุน Nginx
# ุฑุงุฌุน DEPLOYMENT_GUIDE.md

# 3. ุฑุงูุจ ุงูุณุฌูุงุช
docker-compose logs -f | grep ERROR
```

## ๐ ุงููุตูู ููุชุทุจูู

ุจุนุฏ ุงููุดุฑ ุงููุงุฌุญ:

```
Local:    http://localhost:4002
Network:  http://SERVER_IP:4002
```

## ๐ ุงูุชูุซูู ุงูุฅุถุงูู

- [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) - ุฏููู ุงููุดุฑ ุงููุงูู
- [DOCKER_QUICKSTART.md](DOCKER_QUICKSTART.md) - ุงูุจุฏุก ุงูุณุฑูุน
- [NETWORK_CONFIG_GUIDE.md](NETWORK_CONFIG_GUIDE.md) - ุฅุนุฏุงุฏ ุงูุดุจูุฉ

## ๐ ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ

### ูุญุต ุณุฑูุน ููุญุงูุฉ

```bash
# ูุนูููุงุช Container
docker inspect menu-customer-app

# ููุงุฑุฏ ุงุณุชููุงู
docker stats menu-customer-app

# ุงูุณุฌูุงุช ุงูุฃุฎูุฑุฉ
docker-compose logs --tail=100
```

### ุฅุนุงุฏุฉ ุงูุชุนููู ุงููุงููุฉ

```bash
# ุญุฐู ูู ุดูุก ูุฅุนุงุฏุฉ ุงูุจูุงุก
docker-compose down -v
docker system prune -af
docker-compose up -d --build
```

## ๐ ุงูููุงุญุธุงุช ุงููููุฉ

- โ๏ธ ุชุฃูุฏ ูู ูุชุญ ุงูุจูุฑุช 4002 ูู ุฌุฏุงุฑ ุงูุญูุงูุฉ
- โ๏ธ ุชุญูู ูู ุฃู Backend ุนูู `217.76.53.136:3000` ูุนูู
- โ๏ธ ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุงูุชุญุฏูุซุงุช
- โน๏ธ ุงูุณุฌูุงุช ูุญุฏูุฏุฉ ุจู 10MB ู 3 ูููุงุช

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ุชุซุจูุช Docker ู Docker Compose
2. โ ุงุณุชูุณุงุฎ ุงููุดุฑูุน ููุณูุฑูุฑ
3. โ ุชุดุบูู `./deploy.sh deploy`
4. โ ูุชุญ `http://server-ip:4002`
5. โ ุฅุนุฏุงุฏ Nginx ู SSL (ุงุฎุชูุงุฑู)

---

**ุฌุงูุฒ ูููุดุฑุ** ุดุบู `./deploy.sh deploy` ูุงูุชุธุฑ ุจุถุน ุซูุงูู! ๐
